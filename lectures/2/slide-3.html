<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2.3 Безпека мікросервісів | Фінансова Безпека</title>
  <link rel="icon" type="image/svg+xml" href="../../img/favicon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/slides.css">
</head>
<body>

  <div class="top-controls">
    <a href="../../lecture.html?id=2">
      <svg viewBox="0 0 24 24"><path d="m15 18-6-6 6-6"/></svg>
      До лекції
    </a>
    <button onclick="toggleTheme()">
      <span id="theme-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg></span>
      <span id="theme-label">Світла</span>
    </button>
  </div>

  <div class="slide-deck">

    <!-- 1. Title -->
    <section class="slide active">
      <span class="slide-icon">🐳</span>
      <h1>Безпека мікросервісної архітектури</h1>
      <p class="subtitle">Лекція 2.3</p>
      <span class="tag tag-purple" style="margin-top: 1rem;">Контейнери, Kubernetes, Service Mesh</span>
    </section>

    <!-- 2. Виклики мікросервісів -->
    <section class="slide">
      <h1>Виклики безпеки мікросервісів</h1>
      <div class="card-grid">
        <div class="card accent-red">
          <span class="card-icon">🎯</span>
          <div class="card-title">Поверхня атаки</div>
          <div class="card-text">100 сервісів = 100 API = 100 точок входу для атаки</div>
        </div>
        <div class="card accent-orange">
          <span class="card-icon">🔗</span>
          <div class="card-title">Міжсервісний трафік</div>
          <div class="card-text">East-West трафік без захисту — lateral movement легко</div>
        </div>
        <div class="card accent-purple">
          <span class="card-icon">🔑</span>
          <div class="card-title">Секрети</div>
          <div class="card-text">Сотні API-ключів, паролів, сертифікатів для кожного сервісу</div>
        </div>
        <div class="card accent-blue">
          <span class="card-icon">📋</span>
          <div class="card-title">Консистентність</div>
          <div class="card-text">Різні команди, різні стандарти — як забезпечити єдину політику?</div>
        </div>
      </div>
    </section>

    <!-- 3. Service Mesh -->
    <section class="slide">
      <h1>Service Mesh — рішення</h1>
      <h2>Інфраструктурний шар для безпечної комунікації</h2>
      <div class="icon-list">
        <div class="icon-list-item">
          <span class="il-icon">🔐</span>
          <span class="il-text"><strong>mTLS автоматично</strong> — шифрування та взаємна автентифікація між сервісами</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">📜</span>
          <span class="il-text"><strong>Authorization Policies</strong> — хто може викликати кого</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">📊</span>
          <span class="il-text"><strong>Observability</strong> — метрики, логи, traces для всього трафіку</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">⚡</span>
          <span class="il-text"><strong>Traffic Management</strong> — canary deployments, circuit breakers</span>
        </div>
      </div>
      <div class="stat-row" style="margin-top: 1.2rem;">
        <div class="stat-box blue">
          <div class="stat-value">Istio</div>
          <div class="stat-label">найпопулярніший</div>
        </div>
        <div class="stat-box orange">
          <div class="stat-value">Linkerd</div>
          <div class="stat-label">легший</div>
        </div>
        <div class="stat-box purple">
          <div class="stat-value">Consul</div>
          <div class="stat-label">HashiCorp</div>
        </div>
      </div>
    </section>

    <!-- 4. mTLS -->
    <section class="slide">
      <h1>mTLS — Mutual TLS</h1>
      <h2>Двостороння автентифікація сервісів</h2>
      <div class="steps">
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-title">Сертифікат</div>
          <div class="step-desc">Кожен сервіс має X.509</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-title">Привітання клієнта (Client Hello)</div>
          <div class="step-desc">Сервіс A ініціює з'єднання</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-title">Взаємна перевірка (Verify Both)</div>
          <div class="step-desc">Обидва перевіряють сертифікати</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-title">Шифрування (Encrypted)</div>
          <div class="step-desc">Трафік зашифрований</div>
        </div>
      </div>
      <div class="highlight-box" style="margin-top: 1.5rem;">
        <p>Service Mesh автоматично видає, ротує та перевіряє сертифікати. Розробникам не потрібно нічого робити.</p>
      </div>
    </section>

    <!-- 5. Kubernetes Security -->
    <section class="slide">
      <h1>Kubernetes Security</h1>
      <h2>Захист контейнерного оркестратора</h2>
      <div class="card-grid cols-3">
        <div class="card accent-red">
          <span class="card-icon">🐳</span>
          <div class="card-title">Безпека образів (Image Security)</div>
          <div class="card-text">Сканування образів, підписи, trusted registries</div>
        </div>
        <div class="card accent-orange">
          <span class="card-icon">🔒</span>
          <div class="card-title">Безпека подів (Pod Security)</div>
          <div class="card-text">Non-root, read-only FS, no privilege escalation</div>
        </div>
        <div class="card accent-blue">
          <span class="card-icon">🌐</span>
          <div class="card-title">Мережеві політики (Network Policies)</div>
          <div class="card-text">Default deny, explicit allow тільки потрібного трафіку</div>
        </div>
      </div>
      <div class="icon-list" style="margin-top: 1.2rem;">
        <div class="icon-list-item">
          <span class="il-icon">⚠️</span>
          <span class="il-text"><strong>Pod Security Standards:</strong> Privileged → Baseline → <strong>Restricted</strong> (для FinTech)</span>
        </div>
      </div>
    </section>

    <!-- 6. Secrets Management -->
    <section class="slide">
      <h1>Secrets Management</h1>
      <h2>Безпечне зберігання та доступ до секретів</h2>
      <div class="two-col">
        <div class="col">
          <div class="card accent-red" style="height: 100%;">
            <span class="card-icon">❌</span>
            <div class="card-title">Погано</div>
            <div class="card-text" style="margin-top: 8px; font-size: 0.95rem; line-height: 1.7;">
              Паролі в коді<br>
              Секрети в ConfigMap<br>
              .env файли в Git<br>
              Hardcoded API keys
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card accent-green" style="height: 100%;">
            <span class="card-icon">✅</span>
            <div class="card-title">Добре</div>
            <div class="card-text" style="margin-top: 8px; font-size: 0.95rem; line-height: 1.7;">
              HashiCorp Vault<br>
              AWS Secrets Manager<br>
              Azure Key Vault<br>
              Автоматична ротація
            </div>
          </div>
        </div>
      </div>
      <div class="highlight-box warning" style="margin-top: 1.2rem;">
        <p>Vault інжектує секрети при старті контейнера. Секрет ніколи не потрапляє в Git чи Docker image.</p>
      </div>
    </section>

    <!-- 7. Архітектура FinTech -->
    <section class="slide">
      <h1>Безпечна архітектура FinTech</h1>
      <h2>Всі компоненти разом</h2>
      <div class="icon-list">
        <div class="icon-list-item">
          <span class="il-icon">🚪</span>
          <span class="il-text"><strong>API Gateway</strong> — автентифікація, rate limiting, WAF (Kong, AWS API GW)</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">🕸️</span>
          <span class="il-text"><strong>Service Mesh</strong> — mTLS, auth policies, observability (Istio)</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">☸️</span>
          <span class="il-text"><strong>Kubernetes</strong> — Pod Security Restricted, Network Policies</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">🔐</span>
          <span class="il-text"><strong>Vault</strong> — секрети інжектуються динамічно, ротуються автоматично</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">📊</span>
          <span class="il-text"><strong>SIEM</strong> — всі логи централізовано, алерти на аномалії</span>
        </div>
      </div>
    </section>

    <!-- 8. Container Security Layers -->
    <section class="slide">
      <h1>Шари безпеки контейнерів</h1>
      <h2>Defense in Depth для контейнерного середовища</h2>
      <div class="steps">
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-title">Базовий образ (Base Image)</div>
          <div class="step-desc">Мінімальний образ (Alpine, Distroless) — менша поверхня атаки</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-title">Збірка (Build)</div>
          <div class="step-desc">Multi-stage build, no secrets, non-root USER, COPY замість ADD</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-title">Сканування (Scan)</div>
          <div class="step-desc">Trivy/Clair сканують CVE у кожному шарі образу перед push</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-title">Підпис (Sign)</div>
          <div class="step-desc">Cosign/Notary підписують образ — тільки підписані деплояться</div>
        </div>
        <div class="step">
          <div class="step-num">5</div>
          <div class="step-title">Виконання (Runtime)</div>
          <div class="step-desc">Read-only FS, seccomp profiles, AppArmor/SELinux політики</div>
        </div>
      </div>
      <div class="highlight-box warning" style="margin-top: 1.2rem;">
        <p>Distroless-образи Google містять тільки додаток — без shell, без package manager. Зловмисник не зможе встановити інструменти.</p>
      </div>
    </section>

    <!-- 9. Service Mesh Architecture -->
    <section class="slide">
      <h1>Архітектура Service Mesh</h1>
      <h2>Data Plane + Control Plane</h2>
      <div class="two-col">
        <div class="col">
          <div class="card accent-blue" style="height: 100%;">
            <span class="card-icon">📡</span>
            <div class="card-title">Площина даних (Data Plane)</div>
            <div class="card-text" style="margin-top: 8px; font-size: 0.95rem; line-height: 1.7;">
              Envoy sidecar proxy<br>
              Перехоплює весь трафік<br>
              mTLS шифрування<br>
              Load balancing<br>
              Збір телеметрії
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card accent-purple" style="height: 100%;">
            <span class="card-icon">🧠</span>
            <div class="card-title">Площина управління (Control Plane)</div>
            <div class="card-text" style="margin-top: 8px; font-size: 0.95rem; line-height: 1.7;">
              Istiod (Pilot, Citadel, Galley)<br>
              Розподіл сертифікатів<br>
              Конфігурація політик<br>
              Service discovery<br>
              Управління трафіком
            </div>
          </div>
        </div>
      </div>
      <div class="highlight-box" style="margin-top: 1.2rem;">
        <p>Sidecar-проксі додається до кожного pod автоматично. Розробникам не потрібно змінювати код — безпека прозора.</p>
      </div>
    </section>

    <!-- 10. Secrets Management Flow -->
    <section class="slide">
      <h1>Secrets Management: потік роботи</h1>
      <h2>Від створення до ротації секретів</h2>
      <div class="steps">
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-title">Створення</div>
          <div class="step-desc">Vault генерує секрет або отримує від адміністратора</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-title">Шифрування</div>
          <div class="step-desc">AES-256-GCM шифрування у сховищі (Seal/Unseal)</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-title">Політики</div>
          <div class="step-desc">ACL визначає: який сервіс може читати які секрети</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-title">Інжекція</div>
          <div class="step-desc">Sidecar або init-container інжектує секрет у pod при старті</div>
        </div>
        <div class="step">
          <div class="step-num">5</div>
          <div class="step-title">Ротація</div>
          <div class="step-desc">Автоматична ротація за розкладом (30-90 днів) без downtime</div>
        </div>
      </div>
      <div class="stat-row" style="margin-top: 1.2rem;">
        <div class="stat-box blue">
          <div class="stat-value">0</div>
          <div class="stat-label">секретів у коді</div>
        </div>
        <div class="stat-box orange">
          <div class="stat-value">30 днів</div>
          <div class="stat-label">макс. термін життя</div>
        </div>
        <div class="stat-box green">
          <div class="stat-value">100%</div>
          <div class="stat-label">аудит доступу</div>
        </div>
      </div>
    </section>

    <!-- 11. Kubernetes Security -->
    <section class="slide">
      <h1>Kubernetes Security: повний чеклист</h1>
      <h2>Критичні налаштування для FinTech-кластера</h2>
      <div class="card-grid">
        <div class="card accent-red">
          <span class="card-icon">🔒</span>
          <div class="card-title">RBAC</div>
          <div class="card-text">Role-Based Access Control. Мінімальні права для кожного ServiceAccount та оператора</div>
        </div>
        <div class="card accent-orange">
          <span class="card-icon">🌐</span>
          <div class="card-title">Мережеві політики (Network Policies)</div>
          <div class="card-text">Default deny ingress/egress. Явно дозволити тільки необхідні з'єднання між подами</div>
        </div>
        <div class="card accent-blue">
          <span class="card-icon">📋</span>
          <div class="card-title">Контролери допуску (Admission Controllers)</div>
          <div class="card-text">OPA Gatekeeper перевіряє кожен ресурс перед створенням: no root, no hostPath, limits</div>
        </div>
        <div class="card accent-purple">
          <span class="card-icon">🛡️</span>
          <div class="card-title">Безпека виконання (Runtime Security)</div>
          <div class="card-text">Falco моніторить syscalls у реальному часі: shell у контейнері, зміна файлів, мережа</div>
        </div>
      </div>
      <div class="highlight-box danger" style="margin-top: 1.2rem;">
        <p>CIS Kubernetes Benchmark містить 200+ перевірок. Для FinTech потрібен рівень відповідності не менше 95%.</p>
      </div>
    </section>

    <!-- 12. Підсумок -->
    <section class="slide">
      <span class="slide-icon">🛡️</span>
      <h1>Ключові висновки</h1>
      <div class="icon-list">
        <div class="icon-list-item">
          <span class="il-icon">1️⃣</span>
          <span class="il-text"><strong>Service Mesh</strong> — автоматичний mTLS та політики для міжсервісної безпеки</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">2️⃣</span>
          <span class="il-text"><strong>Kubernetes Security</strong> — Pod Security Restricted, Network Policies, image scanning</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">3️⃣</span>
          <span class="il-text"><strong>Secrets</strong> — Vault/KMS замість hardcoded паролів</span>
        </div>
        <div class="icon-list-item">
          <span class="il-icon">4️⃣</span>
          <span class="il-text"><strong>Defense in Depth</strong> — кожен шар додає свій рівень захисту</span>
        </div>
      </div>
    </section>

  </div>

  <div class="slide-counter" id="counter"></div>
  <div class="slide-progress" id="progress"></div>

  <div class="controls">
    <button onclick="prev()">&#8592;</button>
    <button onclick="next()">&#8594;</button>
  </div>

  <script src="../../js/slides.js"></script>

</body>
</html>
