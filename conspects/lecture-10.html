<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Конспект лекції 10: Безпека криптоактивів — гаманці, смарт-контракти, DeFi, біржі.">
  <meta name="author" content="Кафедра ТЕІБ, Ужгородський національний університет">
  <meta name="theme-color" content="#0ea5e9">
  <title>Конспект: Лекція 10 — Фінансова Безпека</title>
  <link rel="icon" type="image/svg+xml" href="../img/favicon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <script>if(localStorage.getItem('theme')==='dark')document.documentElement.classList.add('dark')</script>
</head>
<body>

  <aside>
    <div class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          <path d="M9 12l2 2 4-4"/>
        </svg>
      </div>
      <div class="logo-text">
        Фінансова<br>Безпека
        <span>онлайн-курс</span>
      </div>
    </div>

    <nav aria-label="Головна навігація">
      <a href="../index.html" class="active">
        <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg></span>
        Лекції
      </a>
      <a href="../practicals.html">
        <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></span>
        Практичні
      </a>
      <a href="../tests.html">
        <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg></span>
        Тести
      </a>
      <a href="../materials.html">
        <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg></span>
        Матеріали
      </a>
    </nav>

    <div class="sidebar-footer">
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="Перемкнути тему">
        <svg id="theme-icon" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
        <span id="theme-label">Темна тема</span>
      </button>
    </div>
  </aside>

  <main>
    <div class="lecture-nav-top">
      <a href="../lecture.html?id=10" class="back-link">&larr; Назад до лекції 10</a>
      <span class="lecture-badge">Конспект лекції 10</span>
    </div>

    <article class="lecture-content">
      <h1>Безпека криптоактивів</h1>
      <div class="lecture-info">
        <span>⏱ 2 год</span>
        <span class="badge badge-new">Конспект</span>
      </div>

      <!-- Section 10.1 -->
      <section>
        <h2>10.1 Криптогаманці та управління ключами</h2>

        <p>Криптовалютний гаманець — це інструмент для управління приватними ключами, які дозволяють підписувати транзакції в блокчейні. На відміну від банківських рахунків, у блокчейні немає «забув пароль» — втрата приватного ключа означає безповоротну втрату коштів. За оцінками Chainalysis, понад 20% всіх Bitcoin (>$100 млрд) назавжди втрачені через загублені ключі.</p>

        <p><strong>Типи гаманців за зберіганням ключів:</strong></p>
        <ul>
          <li><strong>Hot wallets (онлайн)</strong> — приватний ключ зберігається на пристрої, підключеному до інтернету: мобільні додатки (Trust Wallet, MetaMask Mobile), десктопні (Exodus, Electrum), веб-гаманці (MetaMask browser extension). Зручні для щоденних операцій, але вразливі до malware, фішингу та remote attacks.</li>
          <li><strong>Cold wallets (офлайн)</strong> — приватний ключ ніколи не контактує з інтернетом: hardware wallets (Ledger, Trezor), paper wallets, air-gapped комп'ютери. Максимальний рівень безпеки, але менш зручні для частих операцій.</li>
          <li><strong>Custodial wallets</strong> — ключами управляє третя сторона (біржа, сервіс). Зручно, але «not your keys, not your coins» — при зломі біржі користувач втрачає кошти (Mt. Gox, FTX).</li>
        </ul>

        <p><strong>Seed phrase (мнемонічна фраза)</strong> — 12 або 24 слова (BIP-39), що є резервною копією всіх ключів у гаманці. Зберігання: на фізичному носії (металева пластина, папір у сейфі), НІКОЛИ в цифровому вигляді (фото, cloud, email). Компрометація seed phrase = втрата всіх коштів.</p>

        <p><strong>Multisig (мультипідпис)</strong> — для підписання транзакції потрібно M з N ключів (наприклад, 2 з 3). Використовується корпоративними treasury, DAO, біржами для захисту від компрометації одного ключа. Gnosis Safe — найпопулярніше рішення для Ethereum multisig.</p>

        <p><strong>MPC (Multi-Party Computation)</strong> — сучасна альтернатива multisig: приватний ключ розділяється на частини (shares), які ніколи не збираються разом. Кожна сторона підписує свою частину, і лише комбінація shares утворює валідний підпис. Переваги: сумісність з будь-яким блокчейном, менший gas cost, гнучкість у зміні схеми підписання.</p>
      </section>

      <!-- Section 10.2 -->
      <section>
        <h2>10.2 Вразливості смарт-контрактів</h2>

        <p>Смарт-контракт — це програма, що виконується на блокчейні та автоматично реалізує умови угоди. Особливість: після деплою код є незмінним (immutable) та публічним. Помилка в коді = вразливість, яку може експлуатувати будь-хто, і виправити її без спеціальних механізмів неможливо.</p>

        <p><strong>Найпоширеніші вразливості (за OWASP Smart Contract Top 10):</strong></p>
        <ul>
          <li><strong>Reentrancy</strong> — зловмисний контракт повторно викликає функцію жертви до завершення попереднього виклику. Класичний кейс: The DAO hack (2016) — крадіжка $60 млн ETH через reentrancy, що призвела до форку Ethereum.</li>
          <li><strong>Integer overflow/underflow</strong> — арифметичні помилки при переповненні типу uint256. Наприклад, баланс 0 мінус 1 дає максимальне число замість помилки. Solidity 0.8+ має вбудований захист, але старі контракти вразливі.</li>
          <li><strong>Access control</strong> — відсутність або неправильна реалізація перевірки прав доступу. Критичні функції (mint, withdraw, pause) без модифікатора onlyOwner доступні будь-кому.</li>
          <li><strong>Front-running</strong> — зловмисник бачить pending транзакцію в mempool та надсилає свою з вищим gas price, щоб виконатися першим. Актуально для DEX та аукціонів.</li>
          <li><strong>Oracle manipulation</strong> — маніпуляція зовнішніми даними (ціна активу), від яких залежить логіка контракту. Якщо oracle повертає маніпульовану ціну, зловмисник може вилучити кошти з протоколу.</li>
          <li><strong>Unchecked return values</strong> — ігнорування результатів зовнішніх викликів (send, call), що може призвести до продовження виконання при невдалому переказі.</li>
        </ul>

        <p><strong>Захист смарт-контрактів:</strong></p>
        <ul>
          <li><strong>Аудит коду</strong> — незалежна перевірка коду спеціалізованими фірмами (Trail of Bits, OpenZeppelin, Consensys Diligence). Мінімум 2 незалежні аудити для DeFi-протоколів з TVL >$10 млн.</li>
          <li><strong>Formal verification</strong> — математичний доказ коректності коду. Certora, K Framework дозволяють формально перевірити властивості контракту.</li>
          <li><strong>Bug bounty</strong> — Immunefi, HackerOne для безперервного тестування community. Виплати до $10 млн за критичні вразливості.</li>
          <li><strong>Використання перевірених бібліотек</strong> — OpenZeppelin Contracts як стандарт для ERC-20, ERC-721, access control.</li>
        </ul>
      </section>

      <!-- Section 10.3 -->
      <section>
        <h2>10.3 Безпека DeFi-протоколів</h2>

        <p>DeFi (Decentralized Finance) — фінансові послуги на блокчейні без посередників: кредитування, обмін, деривативи. Total Value Locked (TVL) у DeFi перевищував $100 млрд. Водночас DeFi — найбільш атакований сегмент крипто: у 2022-2023 роках зломи DeFi принесли збитки понад $3 млрд.</p>

        <p><strong>Flash loan атаки:</strong></p>
        <ul>
          <li>Flash loan — кредит, який береться та повертається в одній транзакції (без застави). Легітимне використання: арбітраж, рефінансування.</li>
          <li>Атака: зловмисник бере flash loan на мільйони доларів → маніпулює ціну на DEX → використовує маніпульовану ціну в іншому протоколі → повертає кредит з прибутком. Все в одній atomic транзакції.</li>
          <li>Захист: використання TWAP (Time-Weighted Average Price) oracle замість spot price, Chainlink як надійний oracle.</li>
        </ul>

        <p><strong>Rug pulls та exit scams:</strong></p>
        <ul>
          <li><strong>Rug pull</strong> — розробники створюють токен, залучають ліквідність, а потім виводять всі кошти з пулу. У 2021 році rug pulls склали $2.8 млрд збитків.</li>
          <li>Ознаки: анонімна команда, немає аудиту, необмежені mint-права, можливість зміни комісій, locked liquidity відсутня.</li>
          <li>Захист: перевірка контракту на TokenSniffer/GoPlus, locked liquidity, renounced ownership, наявність аудиту.</li>
        </ul>

        <p><strong>Bridge attacks</strong> — атаки на міжмережеві мости (cross-chain bridges), які є одними з найвразливіших точок DeFi:</p>
        <ul>
          <li>Ronin Bridge (2022) — $625 млн: компрометація 5 з 9 валідаторів через social engineering.</li>
          <li>Wormhole (2022) — $320 млн: вразливість у верифікації підписів.</li>
          <li>Nomad Bridge (2022) — $190 млн: помилка в ініціалізації, що дозволила будь-кому вивести кошти.</li>
        </ul>
      </section>

      <!-- Section 10.4 -->
      <section>
        <h2>10.4 Безпека бірж та регулювання</h2>

        <p>Централізовані біржі (CEX) — основна точка входу користувачів у крипто. Вони зберігають мільярди доларів у криптоактивах, що робить їх привабливою мішенню для хакерів та шахраїв.</p>

        <p><strong>Безпека біржової інфраструктури:</strong></p>
        <ul>
          <li><strong>Cold/hot storage розподіл</strong> — 95%+ активів у cold storage (multisig, HSM), лише 5% у hot wallet для операційної ліквідності.</li>
          <li><strong>Proof of Reserves (PoR)</strong> — криптографічне підтвердження наявності активів на біржі. Merkle tree + аудитор. Після краху FTX PoR став де-факто стандартом.</li>
          <li><strong>Withdrawal security</strong> — whitelist адрес, cooling period для нових адрес (24-72 години), MFA, email-підтвердження, ліміти виведення.</li>
          <li><strong>Insurance funds</strong> — резервні фонди для компенсації збитків (Binance SAFU fund — $1 млрд).</li>
        </ul>

        <p><strong>Регулювання криптоактивів:</strong></p>
        <ul>
          <li><strong>EU MiCA (Markets in Crypto-Assets)</strong> — перший комплексний регуляторний фреймворк для крипто в ЄС. Вимоги до ліцензування, AML, custody, stablecoin reserves, consumer protection.</li>
          <li><strong>Travel Rule (FATF Recommendation 16)</strong> — при переказі криптоактивів понад поріг ($1000) біржі повинні обмінюватися інформацією про відправника та отримувача, аналогічно банківським переказам.</li>
          <li><strong>Україна</strong> — Закон «Про віртуальні активи» (2022) встановлює правовий фреймворк, НКЦБФР як регулятор, вимоги до реєстрації та AML-compliance для VASP (Virtual Asset Service Providers).</li>
        </ul>
      </section>

      <!-- Summary -->
      <section>
        <h2>Підсумок</h2>
        <p>Безпека криптоактивів вимагає розуміння унікальних ризиків: незворотність транзакцій, публічність та незмінність смарт-контрактів, відсутність централізованого захисту. Управління приватними ключами через cold storage, multisig та MPC є фундаментом безпеки.</p>
        <p>Смарт-контракти вразливі до reentrancy, oracle manipulation та access control помилок — аудит коду та formal verification є обов'язковими. DeFi-протоколи потерпають від flash loan атак, rug pulls та bridge exploits. Регулювання (MiCA, Travel Rule) поступово приводить крипто-індустрію до стандартів традиційних фінансів.</p>
        <p><strong>У наступній лекції</strong> ми розглянемо AML та фінансовий моніторинг: протидію відмиванню коштів, KYC-процедури, системи transaction monitoring та міжнародні стандарти FATF.</p>
      </section>
    </article>

    <div class="lecture-nav-bottom">
      <a href="../lecture.html?id=10" class="nav-btn">&larr; Назад до лекції</a>
      <span></span>
    </div>

    <footer></footer>
  </main>

  <script src="../js/main.js"></script>

</body>
</html>
